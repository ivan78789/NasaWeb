RewriteEngine On

# 1. Исключаем статические файлы (чтобы не перенаправляло картинки, CSS, JS)
RewriteCond %{REQUEST_URI} !\.(png|jpg|webp|gif|jpeg|zip|css|svg|js|pdf|ico)$ [NC]

# 2. Если запрашивается корневая директория, показываем views/index.php
RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^$ views/index.php [L]

# 3. Убираем trailing slash для API endpoints
RewriteCond %{REQUEST_URI} ^/api/(.+)/$
RewriteRule ^api/(.+)/$ /api/$1 [R=301,L]

# 4. Для всех остальных запросов используем routes.php
RewriteRule ^(.*)$ routes.php [QSA,L]
